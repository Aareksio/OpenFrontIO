import { dirname, join } from "path";
import { fileURLToPath } from "url";
import { setup } from "../../util/Setup";

export const PERFORMANCE_ITERATIONS = 10

// Generated ports (water tiles on shoreline)
export const PORTS: { [k: string]: [number, number] } = {
  "Port001": [970, 487],
  "Port002": [1148, 1837],
  "Port003": [893, 818],
  "Port004": [2743, 622],
  "Port005": [2780, 584],
  "Port006": [2452, 559],
  "Port007": [3014, 784],
  "Port008": [3073, 760],
  "Port009": [1912, 508],
  "Port010": [608, 610],
  "Port011": [3011, 760],
  "Port012": [2186, 531],
  "Port013": [2164, 518],
  "Port014": [2036, 510],
  "Port015": [858, 469],
  "Port016": [147, 759],
  "Port017": [3014, 595],
  "Port018": [3078, 754],
  "Port019": [2344, 452],
  "Port020": [2729, 754],
  "Port021": [3011, 755],
  "Port022": [659, 717],
  "Port023": [2965, 553],
  "Port024": [2733, 757],
  "Port025": [2598, 758],
  "Port026": [2861, 455],
  "Port027": [989, 550],
  "Port028": [2552, 714],
  "Port029": [1961, 511],
  "Port030": [2237, 549],
  "Port031": [985, 72],
  "Port032": [995, 459],
  "Port033": [904, 47],
  "Port034": [861, 456],
  "Port035": [1097, 40],
  "Port036": [2580, 275],
  "Port037": [3056, 756],
  "Port038": [925, 556],
  "Port039": [763, 554],
  "Port040": [3007, 46],
  "Port041": [3533, 419],
  "Port042": [3058, 674],
  "Port043": [3311, 558],
  "Port044": [2622, 511],
  "Port045": [3157, 392],
  "Port046": [942, 252],
  "Port047": [2953, 705],
  "Port048": [189, 249],
  "Port049": [3954, 241],
  "Port050": [2994, 244],
  "Port051": [1136, 45],
  "Port052": [3958, 240],
  "Port053": [3146, 388],
  "Port054": [2087, 495],
  "Port055": [785, 557],
  "Port056": [1797, 40],
  "Port057": [817, 158],
  "Port058": [2978, 588],
  "Port059": [904, 40],
  "Port060": [1755, 51],
  "Port061": [723, 762],
  "Port062": [3157, 372],
  "Port063": [2984, 386],
  "Port064": [2833, 676],
  "Port065": [3543, 106],
  "Port066": [1971, 452],
  "Port067": [2283, 218],
  "Port068": [988, 675],
  "Port069": [3155, 714],
  "Port070": [2332, 511],
  "Port071": [1769, 238],
  "Port072": [2002, 291],
  "Port073": [2391, 767],
  "Port074": [2985, 208],
  "Port075": [2475, 655],
  "Port076": [2861, 410],
  "Port077": [571, 111],
  "Port078": [1090, 353],
  "Port079": [3557, 212],
  "Port080": [1155, 49],
  "Port081": [3623, 121],
  "Port082": [2278, 765],
  "Port083": [2849, 305],
  "Port084": [1327, 1058],
  "Port085": [2596, 53],
  "Port086": [1128, 1238],
  "Port087": [83, 213],
  "Port088": [3438, 1029],
  "Port089": [750, 765],
  "Port090": [3570, 410],
  "Port091": [2214, 962],
  "Port092": [1169, 106],
  "Port093": [3428, 1006],
  "Port094": [2608, 37],
  "Port095": [2274, 970],
  "Port096": [2197, 554],
  "Port097": [1042, 970],
  "Port098": [2902, 658],
  "Port099": [1355, 243],
  "Port100": [3426, 1021],
}

// Fast routes only (< 50ms for both PF.Mini and TSNav)
export const ROUTES: Array<[keyof typeof PORTS, keyof typeof PORTS]> = [
  ["Port001", "Port002"],
  ["Port001", "Port003"],
  ["Port002", "Port003"],
  ["Port002", "Port004"],
  ["Port002", "Port005"],
  ["Port004", "Port005"],
  ["Port004", "Port007"],
  ["Port005", "Port007"],
  ["Port005", "Port008"],
  ["Port007", "Port008"],
  ["Port008", "Port011"],
  ["Port009", "Port012"],
  ["Port012", "Port014"],
  ["Port012", "Port015"],
  ["Port014", "Port015"],
  ["Port015", "Port016"],
  ["Port017", "Port018"],
  ["Port017", "Port020"],
  ["Port018", "Port020"],
  ["Port018", "Port021"],
  ["Port019", "Port022"],
  ["Port020", "Port021"],
  ["Port021", "Port024"],
  ["Port024", "Port025"],
  ["Port025", "Port028"],
  ["Port027", "Port029"],
  ["Port027", "Port030"],
  ["Port029", "Port030"],
  ["Port029", "Port031"],
  ["Port029", "Port032"],
  ["Port030", "Port031"],
  ["Port030", "Port032"],
  ["Port030", "Port033"],
  ["Port031", "Port032"],
  ["Port031", "Port033"],
  ["Port031", "Port034"],
  ["Port032", "Port033"],
  ["Port032", "Port034"],
  ["Port032", "Port035"],
  ["Port033", "Port034"],
  ["Port033", "Port035"],
  ["Port033", "Port036"],
  ["Port034", "Port035"],
  ["Port034", "Port036"],
  ["Port035", "Port036"],
  ["Port035", "Port038"],
  ["Port036", "Port038"],
  ["Port036", "Port039"],
  ["Port038", "Port039"],
  ["Port038", "Port040"],
  ["Port039", "Port040"],
  ["Port041", "Port042"],
  ["Port041", "Port043"],
  ["Port042", "Port043"],
  ["Port045", "Port046"],
  ["Port047", "Port049"],
  ["Port049", "Port052"],
  ["Port050", "Port051"],
  ["Port050", "Port053"],
  ["Port051", "Port053"],
  ["Port051", "Port054"],
  ["Port053", "Port055"],
  ["Port053", "Port056"],
  ["Port054", "Port055"],
  ["Port054", "Port056"],
  ["Port054", "Port057"],
  ["Port055", "Port056"],
  ["Port055", "Port057"],
  ["Port056", "Port057"],
  ["Port056", "Port059"],
  ["Port057", "Port059"],
  ["Port057", "Port060"],
  ["Port059", "Port060"],
  ["Port059", "Port062"],
  ["Port060", "Port061"],
  ["Port060", "Port062"],
  ["Port060", "Port063"],
  ["Port061", "Port062"],
  ["Port061", "Port063"],
  ["Port062", "Port063"],
  ["Port062", "Port065"],
  ["Port063", "Port065"],
  ["Port063", "Port066"],
  ["Port065", "Port066"],
  ["Port065", "Port067"],
  ["Port065", "Port068"],
  ["Port066", "Port067"],
  ["Port066", "Port068"],
  ["Port067", "Port068"],
  ["Port067", "Port070"],
  ["Port068", "Port070"],
  ["Port068", "Port071"],
  ["Port070", "Port071"],
  ["Port070", "Port072"],
  ["Port071", "Port072"],
  ["Port073", "Port075"],
  ["Port076", "Port079"],
  ["Port077", "Port079"],
  ["Port077", "Port080"],
  ["Port079", "Port080"],
  ["Port079", "Port081"],
  ["Port079", "Port082"],
  ["Port080", "Port081"],
  ["Port080", "Port083"],
  ["Port081", "Port082"],
  ["Port081", "Port083"],
  ["Port081", "Port084"],
  ["Port082", "Port083"],
  ["Port082", "Port084"],
  ["Port082", "Port085"],
  ["Port083", "Port084"],
  ["Port083", "Port085"],
  ["Port083", "Port086"],
  ["Port084", "Port085"],
  ["Port084", "Port086"],
  ["Port084", "Port087"],
  ["Port085", "Port086"],
  ["Port085", "Port087"],
  ["Port086", "Port087"],
  ["Port088", "Port090"],
  ["Port088", "Port091"],
  ["Port090", "Port093"],
  ["Port091", "Port092"],
  ["Port091", "Port093"],
  ["Port091", "Port094"],
  ["Port092", "Port094"],
  ["Port092", "Port095"],
  ["Port093", "Port095"],
  ["Port094", "Port095"],
  ["Port094", "Port096"],
  ["Port094", "Port097"],
  ["Port095", "Port096"],
  ["Port095", "Port097"],
  ["Port096", "Port097"],
  ["Port096", "Port099"],
  ["Port097", "Port099"],
  ["Port098", "Port100"],
];

export async function setupGame() {
  const localDir = join(dirname(fileURLToPath(import.meta.url)), "..");
  return await setup("giantworldmap", {}, [], localDir);
}
